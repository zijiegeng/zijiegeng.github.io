import{o,b as n,w as x,g as e,ad as a,j as s,v as i,x as p,T as l}from"./modules/vue-DdBzI6iR.js";import{I as m}from"./slidev/default-DMjDit6e.js";import{u as b,f as c}from"./slidev/context-QOEjJLWk.js";import"./index-By41BRkw.js";import"./modules/shiki-DKM40GFB.js";const h={__name:"slides.md__slidev_21",setup(u){const{$clicksContext:d,$frontmatter:r}=b();return d.setup(),(f,t)=>(o(),n(m,i(p(l(c)(l(r),20))),{default:x(()=>[t[0]||(t[0]=e("h1",null,"Transformer 核心：Self-Attention",-1)),t[1]||(t[1]=e("div",{class:"flex items-baseline justify-between mt-1 mb-3"},[e("div",{class:"text-sm text-slate-600"},[e("span",{class:"text-indigo-600 font-medium"},"直觉："),a("理解一个词时，你会自动关注句中其他相关的词 —— Self-Attention 让模型做同样的事 ")]),e("div",{class:"text-[11px] text-slate-400 shrink-0 ml-4"},[a(" 2017 · Vaswani et al. · "),e("span",{class:"italic text-indigo-400"},"Attention Is All You Need")])],-1)),s(" 完整的 Attention 可视化 "),t[2]||(t[2]=e("div",{class:"rounded-xl border border-slate-200 bg-white/80 px-5 py-4 max-w-4xl mx-auto shadow-sm"},[s(" 标题行: Query 来源 "),e("div",{class:"flex items-center justify-center gap-2 mb-3 text-xs"},[e("span",{class:"text-slate-400"},"当前词"),e("span",{class:"rounded-md bg-indigo-100 border-2 border-indigo-400 px-2.5 py-0.5 font-bold text-indigo-700 text-sm"},"垫子"),e("span",{class:"text-slate-400"},"→"),e("span",{class:"rounded bg-indigo-500 text-white px-2 py-0.5 font-bold"},"Query"),e("span",{class:"text-slate-400"},"「我在找谁和我有关？」")]),s(" 5 列: 每个 token 一列 "),e("div",{class:"grid grid-cols-5 gap-3 text-center text-xs"},[s(" Row 1: Token "),e("div",{class:"rounded-md bg-slate-100 border border-slate-200 px-2 py-1.5 font-bold text-slate-700"},"小猫"),e("div",{class:"rounded-md bg-slate-100 border border-slate-200 px-2 py-1.5 font-bold text-slate-700"},"坐"),e("div",{class:"rounded-md bg-slate-100 border border-slate-200 px-2 py-1.5 font-bold text-slate-700"},"在"),e("div",{class:"rounded-md bg-indigo-50 border-2 border-indigo-300 px-2 py-1.5 font-bold text-indigo-700"},"垫子"),e("div",{class:"rounded-md bg-slate-100 border border-slate-200 px-2 py-1.5 font-bold text-slate-700"},"上"),s(" Row 2: Key "),e("div",{class:"text-amber-600"},[e("span",{class:"rounded bg-amber-100 border border-amber-200 px-1.5 py-0.5"},"Key₁")]),e("div",{class:"text-amber-600"},[e("span",{class:"rounded bg-amber-100 border border-amber-200 px-1.5 py-0.5"},"Key₂")]),e("div",{class:"text-amber-600"},[e("span",{class:"rounded bg-amber-100 border border-amber-200 px-1.5 py-0.5"},"Key₃")]),e("div",{class:"text-amber-600"},[e("span",{class:"rounded bg-amber-100 border border-amber-200 px-1.5 py-0.5"},"Key₄")]),e("div",{class:"text-amber-600"},[e("span",{class:"rounded bg-amber-100 border border-amber-200 px-1.5 py-0.5"},"Key₅")]),s(" Row 3: Q·K 点积 → attention 权重 (用柱状条可视化) "),e("div",{class:"flex flex-col items-center gap-1"},[e("div",{class:"w-full rounded bg-rose-400 h-[42px]"}),e("span",{class:"font-mono font-bold text-rose-600"},"0.42")]),e("div",{class:"flex flex-col items-center gap-1"},[e("div",{class:"w-full rounded bg-rose-300 h-[15px] mt-[27px]"}),e("span",{class:"font-mono text-rose-400"},"0.15")]),e("div",{class:"flex flex-col items-center gap-1"},[e("div",{class:"w-full rounded bg-rose-200 h-[5px] mt-[37px]"}),e("span",{class:"font-mono text-rose-300"},"0.05")]),e("div",{class:"flex flex-col items-center gap-1"},[e("div",{class:"w-full rounded bg-rose-400 h-[30px] mt-[12px]"}),e("span",{class:"font-mono font-bold text-rose-500"},"0.30")]),e("div",{class:"flex flex-col items-center gap-1"},[e("div",{class:"w-full rounded bg-rose-200 h-[8px] mt-[34px]"}),e("span",{class:"font-mono text-rose-300"},"0.08")]),s(" Row 4: Value "),e("div",{class:"text-emerald-600"},[e("span",{class:"rounded bg-emerald-100 border border-emerald-200 px-1.5 py-0.5"},"Val₁")]),e("div",{class:"text-emerald-600"},[e("span",{class:"rounded bg-emerald-100 border border-emerald-200 px-1.5 py-0.5"},"Val₂")]),e("div",{class:"text-emerald-600"},[e("span",{class:"rounded bg-emerald-100 border border-emerald-200 px-1.5 py-0.5"},"Val₃")]),e("div",{class:"text-emerald-600"},[e("span",{class:"rounded bg-emerald-100 border border-emerald-200 px-1.5 py-0.5"},"Val₄")]),e("div",{class:"text-emerald-600"},[e("span",{class:"rounded bg-emerald-100 border border-emerald-200 px-1.5 py-0.5"},"Val₅")]),s(" Row 5: 加权贡献 "),e("div",{class:"text-[10px] text-slate-400"},"× 0.42"),e("div",{class:"text-[10px] text-slate-400"},"× 0.15"),e("div",{class:"text-[10px] text-slate-400"},"× 0.05"),e("div",{class:"text-[10px] text-slate-400"},"× 0.30"),e("div",{class:"text-[10px] text-slate-400"},"× 0.08")]),s(" 底部: 汇聚输出 "),e("div",{class:"flex items-center justify-center gap-2 mt-2 pt-2 border-t border-dashed border-slate-200"},[e("span",{class:"text-xs text-slate-400"},"加权求和 →"),e("span",{class:"rounded-md bg-emerald-500 text-white px-3 py-1 font-bold text-sm shadow-sm"},"新「垫子」"),e("span",{class:"text-[10px] text-slate-400 ml-1"},"融合了上下文信息的新表示")]),s(" 左侧标注 "),e("div",{class:"flex justify-between mt-2 text-[10px] text-slate-400"},[e("div",{class:"flex gap-3"},[e("span",null,[e("span",{class:"inline-block w-2 h-2 rounded-sm bg-amber-200 mr-0.5 align-middle"}),a(" Key = 「我是谁」")]),e("span",null,[e("span",{class:"inline-block w-2 h-2 rounded-sm bg-rose-300 mr-0.5 align-middle"}),a(" Q·K = 注意力权重（和 = 1）")]),e("span",null,[e("span",{class:"inline-block w-2 h-2 rounded-sm bg-emerald-200 mr-0.5 align-middle"}),a(" Value = 「我携带的信息」")])])])],-1)),s(" 公式 "),t[3]||(t[3]=e("div",{class:"mt-3 text-center"},[e("div",{class:"inline-block rounded-lg bg-slate-800 text-white px-5 py-1.5 font-mono text-sm shadow-lg"},[a(" Attention(Q, K, V) = softmax(Q · K"),e("sup",null,"T"),a(" / √d"),e("sub",null,"k"),a(") · V ")])],-1))]),_:1},16))}};export{h as default};
